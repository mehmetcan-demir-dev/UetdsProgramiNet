@model List<BlogModel>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}

<!-- Main Content Wrapper -->
<div class="main-content-wrapper">

    <!-- Breadcrumb Section -->
    <div class="breadcrumb-container mb-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-center">
                <li class="breadcrumb-item"><a href="/Home/Index">AnaSayfa</a></li>
                <li class="breadcrumb-item active" aria-current="page">BLOG</li>
            </ol>
        </nav>
    </div>

    <!-- Title Section -->
    <div class="text-center my-5">
        <h3>U-ETDS Programı Blog</h3>
    </div>

    <!-- Main Container -->
    <div class="container">
        @foreach (var item in Model.Select((value, index) => new { index, value }))
        {
            <div class="custom-blog-item mb-4">
                <div class="row">
                    @if (item.index % 2 == 0)
                    {
                        <div class="col-md-4">
                            <div class="custom-blog-image">
                                <img src="@item.value.ImgUrl" alt="@item.value.Title" class="img-fluid rounded">
                            </div>
                            <div class="created-date text-center mt-2">
                                <medium class="text-muted" style="font-size: 1.1rem;">
                                    @item.value.CreatedDate.ToString("D")
                                </medium>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="custom-blog-content">
                                <h4 class="custom-blog-title">@item.value.Title</h4>
                                <p class="custom-blog-description">
                                    @item.value.Description.Substring(0, 150)...
                                </p>
                                <button class="btn btn-link custom-show-more-text p-0"
                                        data-blog-id="@item.index"
                                        data-blog-title="@item.value.Title"
                                        data-blog-description="@item.value.Description"
                                        data-blog-subdescription="@item.value.SubDescription"
                                        data-blog-image="@item.value.ImgUrl"
                                        data-blog-date="@item.value.CreatedDate.ToString("D")">
                                    Devamı için tıklayınız
                                </button>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="col-md-8">
                            <div class="custom-blog-content">
                                <h4 class="custom-blog-title">@item.value.Title</h4>
                                <p class="custom-blog-description">
                                    @item.value.Description.Substring(0, 150)...
                                </p>
                                <button class="btn btn-link custom-show-more-text p-0"
                                        data-blog-id="@item.index"
                                        data-blog-title="@item.value.Title"
                                        data-blog-description="@item.value.Description"
                                        data-blog-subdescription="@item.value.SubDescription"
                                        data-blog-image="@item.value.ImgUrl"
                                        data-blog-date="@item.value.CreatedDate.ToString("yyyy-MM-dd HH:mm:ss")">
                                    Devamı için tıklayınız
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="custom-blog-image">
                                <img src="@item.value.ImgUrl" alt="@item.value.Title" class="img-fluid rounded">
                            </div>
                            <div class="created-date text-center mt-2">
                                <medium class="text-muted" style="font-size: 1.1rem;">
                                    @item.value.CreatedDate.ToString("yyyy-MM-dd HH:mm:ss")
                                </medium>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
</div>

<!-- Blog Modal -->
<div class="modal" id="blogModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h5 class="modal-title" id="modalBlogTitle"></h5>
                <!-- X butonu -->
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="font-size: 12px; padding: 5px 10px;">X</button>

            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-md-5">
                        <img id="modalBlogImage" src="" alt="" class="img-fluid rounded w-100">
                        <div class="mt-3">
                            <h6 class="text-muted" id="modalBlogDate"></h6>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="blog-content-container">
                            <div id="modalBlogDescription"></div>
                            <div id="modalBlogSubDescription" class="mt-4"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <!-- Kapat butonunu data-bs-dismiss ile düzenledik -->
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>





<script>
           document.addEventListener('DOMContentLoaded', function () {
        // Modal'ı açma fonksiyonu
        function openBlogModal(data) {
            const modal = document.getElementById('blogModal');

            // Modal içeriğini doldur
            document.getElementById('modalBlogTitle').innerText = data.title;
            document.getElementById('modalBlogDescription').innerText = data.description;
            document.getElementById('modalBlogSubDescription').innerText = data.subdescription;
            document.getElementById('modalBlogDate').innerText = data.date;
            document.getElementById('modalBlogImage').src = data.imageUrl;

            // Modal'ı göster
            modal.style.display = 'block';
        }

        // Modal dışına tıklanarak modal'ı kapatmak
        const modal = document.getElementById('blogModal');
        window.addEventListener('click', function (event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Kapat butonuna tıklanarak modal'ı kapatmak
        const closeButton = document.querySelector('.btn-secondary');
        closeButton.addEventListener('click', function () {
            modal.style.display = 'none';
        });

        // Blog içerik butonuna tıklanarak modal'ı açmak
        document.querySelectorAll('.custom-show-more-text').forEach(button => {
            button.addEventListener('click', function () {
                const blogData = {
                    title: this.getAttribute('data-blog-title'),
                    description: this.getAttribute('data-blog-description'),
                    subdescription: this.getAttribute('data-blog-subdescription'),
                    date: this.getAttribute('data-blog-date'),
                    imageUrl: this.getAttribute('data-blog-image')
                };
                openBlogModal(blogData); // Modal'ı aç
            });
        });
    });
</script>
